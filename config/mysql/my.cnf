[mysqld]
# 基础设置
user = mysql
port = 3306
socket = /var/run/mysqld/mysqld.sock

# 内存优化 - 阿里云低配机专用
innodb_buffer_pool_size = 64M          # InnoDB缓冲池，减少内存占用
key_buffer_size = 16M                  # MyISAM索引缓存
max_connections = 50                   # 减少最大连接数
table_open_cache = 64                  # 减少表缓存
thread_cache_size = 8                  # 减少线程缓存

# InnoDB设置
innodb_log_buffer_size = 8M
innodb_log_file_size = 32M
innodb_flush_log_at_trx_commit = 2     # 牺牲一些持久性换取性能
innodb_flush_method = O_DIRECT

# 临时表设置
tmp_table_size = 32M
max_heap_table_size = 32M

# 其他优化
skip-name-resolve                      # 跳过DNS解析
character-set-server = utf8mb4
collation-server = utf8mb4_unicode_ci
default-storage-engine = InnoDB

# 慢查询日志（可选开启）
# slow_query_log = 1
# slow_query_log_file = /var/log/mysql/slow.log
# long_query_time = 2

[mysqld_safe]
log-error = /var/log/mysql/error.log
EOF